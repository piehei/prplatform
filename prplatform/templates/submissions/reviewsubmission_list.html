{% extends "base.html" %}
{% load static i18n %}
{% block title %}Submissions{% endblock %}
{% load django_bootstrap_breadcrumbs %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb course.code course.get_absolute_url %}
    {% breadcrumb "Peer-review exercise" ""%}
    {% breadcrumb exercise.name exercise.get_absolute_url %}
    {% breadcrumb "List" "" %}
{% endblock %}

{% block content %}


  {% if my_mode %}
  {% include "../tabs.html" with tab="submissions_me" object=exercise %}
  {% else %}
  {% include "../tabs.html" with tab="submissions" object=exercise %}
  {% endif %}
  <div class="row">
    <div class="col-md-12">

      {% if show_reviews_date_not_passed %}
      Peer-reviews will be available after {{ exercise.show_reviews_after_date }}<br>
      {% else %}

      <table class="table table-striped">
        <thead>
          <tr>
            <th>Review</th>
            {% if teacher %}
            <th>Reviewer</th>
            {% endif %}
            {% if not my_mode %}
            <th>Reviewed</th>
            {% endif %}
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
            {% for origsub in object_list %}
              <tr scope="row">
                <td>
                  <a href="{{ origsub.get_absolute_url }}">
                    {{ forloop.counter }}
                  </a>
                </td>
                {% if teacher %}
                  <td>
                    {{ origsub.submitter }}
                  </td>
                {% endif %}
                {% if not my_mode %}
                <td>
                  {% if teacher %}<a href="{{ origsub.reviewed_submisison.get_absolute_url }}">{% endif %}
                    {{ origsub.reviewed_submission }}
                  {% if teacher %}</a>{% endif %}
                </td>
                {% endif %}
                <td>
                  {{ origsub.created }}
                </td>
              </tr>
            {% endfor %}
        </tbody>
      </table>

      {% endif %}

      {% if not object_list and not teacher %}
        No submissions/peer-reviews available yet
      {% elif not object_list and teacher %}
        This page would list feedback from other students to you. You're a teacher, so the list is empty.
      {% endif %}

    </div>
  </div>

{% endblock content %}
