
{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% load django_bootstrap_breadcrumbs %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb object.course.code "courses:detail" object.course.base_course.url_slug object.course.url_slug %}
    {% breadcrumb object.name "courses:exercises:submission-detail" object.course.base_course.url_slug object.course.url_slug %}
{% endblock %}

{% block content %}
<div class="container">

  <div class="row">
    <div class="col-sm-12">
      <h2>Exercise: {{ object.name }}
        {% if teacher %}
          <a href="{% url 'courses:update-submission-exercise' object.course.base_course.url_slug object.course.url_slug object.pk %}">
            (edit)
          </a>
        {% endif %}
      </h2>


      <div class="col-md-12">
        {{ object.description | linebreaks }}
      </div>


      {% if my_submissions %}

      <p>You have already made a submissions to this exercise. You may find your submissions below:</p>

        {% for origsub in my_submissions %}
          <a href="{% url 'courses:submissions:original-detail' course.base_course.url_slug course.url_slug pk origsub.pk %}" class="list-group-item">
             {{ origsub }}
            </a>
        {% endfor %}

      {% else %}

        {% if object.type == 'APLUS' %}

          This exercise retrieves your submission in Plus. You're supposed to make your submission over there.

        {% else %}

          <form enctype="multipart/form-data"
                action="{% url 'courses:exercises:submission-detail' object.course.base_course.url_slug object.course.url_slug object.pk %}"
                method="post">
                {% csrf_token %}
                {{ form | crispy }}
                <input type="submit" class="btn btn-primary" value="Submit" />
            </form>

        {% endif %}

      {% endif %}


        <!-- TODO: this hand-crafted form might need to be replaced
                   with some future submission model form
      {% if object.file_upload %}
      <div class="col-md-12 mt-4">


        <form>
          <div class="form-group mb-4">
            <label for="exampleFormControlFile1">
              {{ object.upload_instructions }}
            </label>
            <input type="file" class="form-control-file" id="exampleFormControlFile1">
          </div>

          <button type="button" class="btn btn-primary btn-sm">Submit</button>
        </form>




      </div>
      {% endif %}
        -->

    </div>
  </div>
</div>
{% endblock content %}

